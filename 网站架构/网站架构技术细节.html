<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.2.1 (456793)"/><meta name="author" content="黄冠清华"/><meta name="created" content="2017-08-16 15:41:40 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2017-08-22 15:45:32 +0000"/><title>网站架构技术细节</title></head><body><div>后端架构的套路（服务解耦） （负载均衡）（动静分离）（读写分离）（缓存）（分布式）</div><div><br/></div><div><font color="#942192">为什么要业务拆分？</font></div><div>各请求耗时不一样，防止请求阻塞</div><div>功能属性,登陆重启冷数据，上传文件I/O密集</div><div>方便故障排查</div><div>代码不一样拆分</div><div><br/></div><div><font style="color: rgb(148, 33, 146);">如果保证读写分离？</font></div><div>sql语句预处理，关键字判断</div><div>账号权限配置，从库操作账号只拥有读权限</div><div><br/></div><div><font color="#942192">数据库服务器负载高，如果排查如何解决？</font></div><div>show processlist 查看线程数</div><div>检查分析mysql慢日志</div><div><br/></div><div><font color="#942192">架构和性能优化的核心原则</font></div><div><br/></div><div>动静分离『静态资源 动态页面分离 数据库的动静分离』</div><div>读写分离「mysql主从 nosql主从」「redis主从」</div><div>业务分离「数据分离 集群分离 服务化」</div><div><br/></div><div>为什么需要服务治理？</div><div>活动服务</div><div>订单服务</div><div>客服服务</div><div><br/></div><div>服务治理的原理</div><div><br/></div><div><font color="#942192">日志的分类</font></div><div>监控日志</div><div>业务日志</div><div>开发调试</div><div>用户行为</div><div>运营埋点</div><div><br/></div><div>从nginx日志里面找出请求耗时最长的100条请求？</div><div>awk | sort | head -n 10</div><div><br/></div><div><font color="#942192">监控系统</font></div><div>老牌系统 zabbix</div><div>需要监控哪些数据？</div><div>系统层：cpu，内存，负载，网卡，I/O</div><div>应用层：qps，api响应时长，redis内存使用量，队列任务数，php-fpm进程数，mysql线程数</div><div>健康巡查：dns解析，ip是否访问，硬盘，各种技术服务</div><div><br/></div><div>搭建一个基于git代码分布系统</div><div><br/></div><div>checkout开发分支A -&gt;提交webhook更新检出到测试服务器-&gt;checkout&amp;&amp;rsync预发服务器-&gt;checkout&amp;&amp;rsync正式服务器</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></body></html>